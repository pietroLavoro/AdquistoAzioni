<!-- Cabecera (sólo cuando NO está embebido) -->
<div *ngIf="!embedded" class="header" style="margin-bottom: 8px">
  <h1>Compras registradas</h1>
  <button type="button" (click)="nuovo()" [disabled]="loading">Nueva compra</button>
</div>

<!-- Título discreto cuando está embebido -->
<h3 *ngIf="embedded" style="margin: 12px 0 4px">Compras registradas</h3>

<!-- Estados -->
<div *ngIf="loading">Cargando…</div>
<div *ngIf="!loading && error" style="color: #c00">Error: {{ error }}</div>

<!-- Tabla -->
<table
  *ngIf="!loading && !error && items.length > 0"
  border="1"
  cellpadding="6"
  style="width: 100%; max-width: 680px; border-collapse: collapse"
>
  <thead>
    <tr>
      <th style="width: 6rem">ID</th>
      <th style="width: 9rem">Fecha</th>
      <th>Título</th>
      <th class="text-right" style="width: 9rem">Importe</th>
      <th class="text-right" style="width: 9rem">Cantidad</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let r of items">
      <td>{{ r.id }}</td>
      <td>{{ r.dataCompra }}</td>
      <td>{{ r.titoloCodice }}</td>
      <td class="text-right">{{ r.importoTotale | number : '1.2-2' }}</td>
      <td class="text-right">{{ r.quantitaTotale }}</td>
    </tr>
  </tbody>
</table>

<!-- Vacío -->
<p *ngIf="!loading && !error && items.length === 0">No hay compras aún.</p>
