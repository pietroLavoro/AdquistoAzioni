<!-- Cabecera sólo si NO está embebida -->
<div *ngIf="!embedded" style="margin-bottom:8px;">
  <h1>Compras registradas</h1>
  <button (click)="nuovo()" [disabled]="loading">Nueva compra</button>
</div>

<!-- En modo embebido puedes usar h3 más discreto -->
<h3 *ngIf="embedded" style="margin:12px 0 4px;">Compras registradas</h3>

<div *ngIf="loading">Cargando…</div>
<div *ngIf="!loading && error" style="color:#c00;">Error: {{ error }}</div>

<table *ngIf="!loading && !error && items.length" border="1" cellpadding="6" style="width:100%;max-width:680px;">
  <thead>
    <tr>
      <th>ID</th>
      <th>Fecha</th>
      <th>Título</th>
      <th>Importe</th>
      <th>Cantidad</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let r of items">
      <td>{{ r.id }}</td>
      <td>{{ r.dataCompra }}</td>
      <td>{{ r.titoloCodice }}</td>
      <td style="text-align:right;">{{ r.importoTotale | number:'1.2-2' }}</td>
      <td style="text-align:right;">{{ r.quantitaTotale }}</td>
    </tr>
  </tbody>
</table>

<p *ngIf="!loading && !error && !items.length">No hay compras aún.</p>
